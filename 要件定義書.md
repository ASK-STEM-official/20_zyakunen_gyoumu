# 讃岐オリーブ受注管理

## プロジェクト概要
- プロジェクト名　さぬきオリーブ受注マン(仮称)

## 背景
- 現在、顧客側ではECサイトから最新の注文データCSVファイルを手作業でExcelに読み込んでいる。CSVデータには、商品名や発注数、届け先の住所や注文日時、顧客名が記述が記載してある。
- 現在の管理方法では、受注データを読み込んでから在庫確認を行っているために、商品ページと実際の在庫のずれが発生してしまっている。
    - 在庫管理システムと注文管理システムを統合し、注文データをもとに発注リストを作成したい

## 目的
- 今まで行っていたECサイトからのCSVデータ取得を自動で行い、そのデータをもとに発注データの管理、在庫の管理を円滑にすることが目的

## 開発範囲
今回は管理者向けのECサイトデータ取得、発注から配送までの業務フローを管理できるソフトウェアの開発を行う。
将来的に、配送用の送り状作成、配送中の情報の取得を管理するソフトウェアの開発が展望としてある

## 使用技術
- 言語 ：C#
- フレームワーク: .Netframework
- IDE: Visual Studio 2022 Comunity(17.12.x)
- VSCode(1.92.2)
    - C#、mssqlの拡張機能入り

- SQL Server Developer Edition CU19
- SQL Server management Studio v20.2

## 改善点
- ECサイトのCSVをアプリケーション内から自動取得する
- 新規予約ステータスの注文に絞り込みできるようにする
- 在庫が足りない場合は入荷待ち、もしくはお客様に連絡して調整する
- 発送可能と判断された場合注文ステータスを新規予約から受注確定へ切り替え
    - この時点で在庫数を減算
- 発送可能になった場合にアプリケーション上で発送済みに切り替え
- 一週間当たりの全体売上、利用顧客数、発送済み注文数、売り上げ上位商品とその売り上げ値段について記述された週報を出す
- 在庫が一定数を下回った場合に在庫低下アラートを出す
    - 自動で発注リストを作成し品切れを防ぐ
    - 顧客側ページにも確認できるように
- オリーブ製品の商品名、価格、説明文を登録する

## 業務要件
### 業務フロー
1. ECサイトに顧客が発注情報を入力し確定
2. ECサイトから発注情報のあるCSVデータを取得
3. 取得したデータをもとに、在庫の確保を行う
4. 発注可能な注文から順に発注

### 

## 機能要件
### 管理者ログイン機能
- 事前登録された管理者IDとパスワードで認証機能を実装
- パスワードはbcryptまたはPBKDF2(.Net標準)を利用するものとする。
- パスワード入力欄は通常時は・、または＊で伏せておく

### 商品マスタ表示機能
- 登録されている商品リストを表示する。
- 商品名、価格、在庫を確認できる。
- 商品画像を将来的に追加することを想定し、各要素の幅は広くとる
- 商品リストから個別ページへ飛べるように実装

### CSVインポート機能
- ECサイトのAPIから受注データをCSV形式で取得し、読み込み、データベースへ保存する
- 更新され次第リアルタイムにデータを取得
- 手動で「データ取得ボタン」を利用し取得することも可能

### 受注一覧表示機能
- データベースに保存される発注予約データを一覧表示する
- 受注ID、顧客名、商品名、品数、予約日を登録
- 受注ID、顧客名での簡易検索・絞り込み
- 顧客ごと、同じ商品ごと、予約日のソートも可能とする

#### 受注詳細表示機能
- 注文の中の詳細情報を表示する
- 顧客の住所、氏名、購入した商品とその個数、金額、支払い形式、注文日時を表示する

#### 受注ステータス更新機能
- 受注詳細表示画面から発注予約のステータスを「新規予約」から「受注確定」、最終的には「発送済み」のように更新する
- 受注確定から該当商品の在庫数を減算する

### 顧客情報閲覧機能
- 顧客あたりの分析レポートとしてを何回行っているか、その顧客が過去に購入した商品の履歴、前回の注文から経過した日時を出力する
- 電話番号や住所、名前など個人情報に直結するデータと、注文履歴のデータは別テーブルで管理する

### 簡易集計機能
- 指定期間内の売り上げ合計を出力する
- 商品別販売数の集計結果を表示する
- これらのデータは数値としてCSVに書き出しできるほか、アプリケーション内でグラフとして分析データを閲覧できるようにする。

### 在庫アラートについて
- 事前に指定した在庫数を下回った場合にアラートを出す
- この在庫数は商品ごとに指定できる

## 非機能要件
### 発注予約明細情報の取り扱い
- 履歴保持の観点から商品が削除されても取引明細は削除しない
- 予約が削除された場合には明細も削除する
- ステータスの変更があった場合該当の明細情報IDと変更者、変更日時、変更前と変更後のデータを保持する

### ECサイトから取得するデータの取り扱い
- 個人情報保護の観点から、顧客の名前、住所など個人情報は分離したテーブルで管理する
- ECサイトのデータは発注情報のデータが更新され次第リアルタイムに、変更が検出されなくても10分に1回は更新が入るようにする

### ソフトウェア設計
- MVCを意識したソフトウェア設計とし、拡張性を考慮する。
    - 将来的に送り状自動発行システム等の構築時に不便にならないように配慮する

## データベース仕様
(ここにER図はりつけ)

